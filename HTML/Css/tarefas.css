/* Css/tarefas.css */

/* ==========================================================================
   Estilos Base para os Modais (<dialog>) na página de Tarefas
   ========================================================================== */
dialog {
    width: 90%;
    border-radius: 12px; 
    border: none; 
    padding: 0; 
    box-shadow: 0px 8px 24px rgba(20, 20, 22, 0.15); 
}

dialog::backdrop {
    background-color: rgba(0, 0, 0, 0.5); 
}

/* Tamanhos específicos para os diálogos da página de tarefas */
dialog#modalTarefa,
dialog#modalDisciplina {
    max-width: 800px; /* Alinhado com modal-lg de modais-adicao.css para consistência */
                     /* Seus exemplos de calendário usam modal-lg */
}

dialog#modalDetalhesTarefa {
   max-width: 520px; 
}

/* ==========================================================================
   Estilos para Componentes INTERNOS dos <dialog> #modalTarefa e #modalDisciplina
   Estes estilos são ajustados para espelhar modais-adicao.css e as imagens de referência.
   Certifique-se que o HTML interno desses <dialog>s foi reestruturado
   para usar as classes: .modal-header-studyflow, .modal-body-custom, 
   .modal-property-item, .modal-property-label, .modal-property-input, etc.
   ========================================================================== */

/* --- Cabeçalho do Modal --- */
dialog#modalTarefa .modal-header-studyflow,
dialog#modalDisciplina .modal-header-studyflow {
    background-color: #FFFFFF;
    padding: 1.25rem 1.75rem; /* Alinhado com modais-adicao.css */
    border-bottom: 1px solid #E9E9F0;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-top-left-radius: 12px; /* Para coincidir com o dialog */
    border-top-right-radius: 12px;/* Para coincidir com o dialog */
}
dialog#modalTarefa .modal-title-wrapper,
dialog#modalDisciplina .modal-title-wrapper {
    display: flex;
    align-items: center;
}
dialog#modalTarefa .modal-logo-icon,
dialog#modalDisciplina .modal-logo-icon {
    width: 24px; /* Alinhado com modais-adicao.css */
    height: 24px;/* Alinhado com modais-adicao.css */
    margin-right: .75rem;
}
dialog#modalTarefa .modal-title-custom,
dialog#modalDisciplina .modal-title-custom {
    font-weight: 600;
    font-size: 1.2rem; /* Alinhado com modais-adicao.css */
    color: #2E3A59;
    margin-bottom: 0;
}
dialog#modalTarefa .btn-close-custom, /* Usado nos seus dialogs */
dialog#modalDisciplina .btn-close-custom,
dialog#modalTarefa .btn-close.btn-close-white, /* Usado nos modais Bootstrap */
dialog#modalDisciplina .btn-close.btn-close-white {
    filter: none; /* Removido o filter, pois btn-close-white já é estilizado ou o custom fará o trabalho */
    background: transparent;
    border: none;
    font-size: 1.5rem; /* Tamanho do X */
    padding: .5rem;
    line-height: 1;
    opacity: 0.7; /* Opacidade padrão para X escuro */
}
dialog#modalTarefa .btn-close-custom:hover,
dialog#modalDisciplina .btn-close-custom:hover,
dialog#modalTarefa .btn-close.btn-close-white:hover,
dialog#modalDisciplina .btn-close.btn-close-white:hover {
    opacity: 1;
}
/* Para o btn-close-white de Bootstrap, o Bootstrap já o torna branco. Se for o btn-close-custom, ele precisa de cor se o fundo for escuro. */
/* No caso de modal-header-studyflow, o fundo é branco, então o X padrão do Bootstrap (escuro) ou btn-close-custom (escuro) funciona. */


/* --- Corpo do Modal --- */
dialog#modalTarefa .modal-body-custom,
dialog#modalDisciplina .modal-body-custom {
    padding: 1.5rem 1.75rem; /* Alinhado com modais-adicao.css */
    background: #FFF;
}

/* --- Estilos para Layout de Propriedades (Ícone - Label - Input) --- */
/* Estas classes (.modal-property-item, etc.) devem ser adicionadas ao HTML interno dos seus <dialog> */
dialog#modalTarefa .modal-property-item,
dialog#modalDisciplina .modal-property-item {
    display: flex;
    align-items: center; 
    gap: 0.75rem;
    /* margin-bottom: 1rem; /* Já tratado pelo mb-3 no HTML sugerido */
}
dialog#modalTarefa .modal-property-item.align-items-start,
dialog#modalDisciplina .modal-property-item.align-items-start { 
    align-items: flex-start;
}
dialog#modalTarefa .modal-property-item.align-items-start .modal-property-icon,
dialog#modalDisciplina .modal-property-item.align-items-start .modal-property-icon {
    margin-top: 0.375rem; 
}

dialog#modalTarefa .modal-property-icon,
dialog#modalDisciplina .modal-property-icon {
    font-size: 1.1rem;
    color: #6c757d; 
    flex-shrink: 0;
    width: 24px; 
    text-align: center;
    line-height: 1.5; 
}
dialog#modalTarefa .modal-property-icon .bi,
dialog#modalDisciplina .modal-property-icon .bi { 
    vertical-align: middle;
}

dialog#modalTarefa .modal-property-label, /* Para os labels ao lado dos ícones */
dialog#modalDisciplina .modal-property-label {
    font-size: 0.875rem;
    color: #4F5E7B; 
    font-weight: 500;
    margin-bottom: 0 !important; 
    margin-right: 0.5rem;
    flex-shrink: 0;
    width: 90px; 
}

/* Wrapper para o input e feedback de erro, se necessário */
dialog#modalTarefa .input-wrapper,
dialog#modalDisciplina .input-wrapper { 
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

/* Inputs, Selects, Textareas dentro do layout de propriedade */
dialog#modalTarefa .modal-property-input, /* Use esta classe nos seus inputs/selects/textareas */
dialog#modalDisciplina .modal-property-input {
    width: 100%; 
    font-size: 0.9rem; /* Alinhado com modais-adicao.css */
    padding: 0.5rem 0.8rem; /* Alinhado com modais-adicao.css */
    border: 1px solid #D9DDE7; 
    border-radius: 8px;             
    color: #2E3A59;             
    background-color: #FFFFFF;  
}
dialog#modalTarefa textarea.modal-property-input, /* Especificidade para textarea se necessário */
dialog#modalDisciplina textarea.modal-property-input {
    min-height: 80px; 
}

dialog#modalTarefa .modal-property-input::placeholder,
dialog#modalDisciplina .modal-property-input::placeholder {
    color: #A0AEC0; 
}
dialog#modalTarefa .modal-property-input:focus,
dialog#modalDisciplina .modal-property-input:focus {
    border-color: var(--primary-color, #5568FE); /* Usar fallback consistente */
    box-shadow: 0 0 0 .2rem rgba(var(--primary-rgb, 85,104,254),.25); /* Usar fallback consistente */
}

/* Tratamento de erro (Bootstrap padrão funciona bem se as classes .is-invalid e .invalid-feedback estiverem no HTML) */
dialog#modalTarefa .modal-property-input.is-invalid,
dialog#modalDisciplina .modal-property-input.is-invalid {
    border-color: #dc3545 !important; 
}
dialog#modalTarefa .input-wrapper > .invalid-feedback, /* Se o feedback estiver dentro do input-wrapper */
dialog#modalDisciplina .input-wrapper > .invalid-feedback { 
    width: 100%; margin-top: .25rem; font-size: .875em; color: #dc3545;
}


/* --- Rodapé do Modal --- */
dialog#modalTarefa .modal-footer-studyflow,
dialog#modalDisciplina .modal-footer-studyflow {
    background: #FFFFFF; 
    border-top: 1px solid #E9E9F0; 
    padding: 1rem 1.75rem; /* Alinhado com modais-adicao.css */
    display: flex;
    justify-content: flex-end;
    border-bottom-left-radius: 12px; /* Para coincidir com o dialog */
    border-bottom-right-radius: 12px;/* Para coincidir com o dialog */
}
dialog#modalTarefa .btn-modal-cancel,
dialog#modalDisciplina .btn-modal-cancel {
    background: #F1F3F6; 
    border: 1px solid #F1F3F6;
    color: #4F5E7B; 
    padding: 0.5rem 1.2rem; /* Alinhado com modais-adicao.css */
    border-radius: 8px; 
    font-weight: 500;
    font-size: 0.9rem; /* Alinhado com modais-adicao.css */
}
dialog#modalTarefa .btn-modal-cancel:hover,
dialog#modalDisciplina .btn-modal-cancel:hover {
    background: #E2E6EB;
    border-color: #E2E6EB;
}
dialog#modalTarefa .btn-modal-save,
dialog#modalDisciplina .btn-modal-save {
    background: #2E3A59; 
    border: 1px solid #2E3A59;
    color: #FFF;
    padding: 0.5rem 1.2rem; /* Alinhado com modais-adicao.css */
    border-radius: 8px;
    font-weight: 500;
    font-size: 0.9rem; /* Alinhado com modais-adicao.css */
}
dialog#modalTarefa .btn-modal-save:hover,
dialog#modalDisciplina .btn-modal-save:hover {
    background: #242E47;
    border-color: #242E47;
}

/* ==========================================================================
   Estilos Específicos da Página de Tarefas (Títulos, Tabela, etc.)
   (Estes estilos foram mantidos da sua versão anterior)
   ========================================================================== */
.sf-page-title {
    font-weight: 600;
    color: var(--text-title-color, #2E3A59); 
    margin-bottom: .25rem;
}

.sf-page-subtitle {
    font-size: .95rem;
    color: var(--text-body-color, #4F5E7B); 
    margin-bottom: 1.5rem;
}

/* ===== Tabela e Ações ===== */
.tarefas-table th {
    font-weight: 600;
    font-size: .85rem;
    text-transform: uppercase;
    color: var(--text-body-color, #4F5E7B); 
    white-space: nowrap;
}

.tarefas-table td {
    font-size: .9rem;
    vertical-align: middle;
    overflow: hidden;
    text-overflow: ellipsis;
}
.tarefas-table td.dt-column-title { max-width: 250px; } 
.tarefas-table td.dt-column-disciplina { max-width: 200px; } 


.tarefas-table th.dt-actions-column,
.tarefas-table td.dt-actions-column {
    text-align: center !important; 
    padding: 0 .5rem !important;
    min-width: 50px;
    max-width: 70px;
    width: 70px; 
    overflow: visible; 
}

/* DataTables responsive toggle */
table.dataTable.dtr-inline.collapsed > tbody > tr > td.dtr-control::before,
table.dataTable.dtr-inline.collapsed > tbody > tr > th.dtr-control::before {
    content: "+";
    width: 1.2em;
    height: 1.2em;
    line-height: 1.2em; 
    text-align: center;
    color: #FFF;
    background-color: var(--primary-color, #5568FE); 
    border-radius: 50%;
    box-shadow: 0 1px 3px rgba(0,0,0,.2);
}
table.dataTable.dtr-inline.collapsed > tbody > tr.parent > td.dtr-control::before,
table.dataTable.dtr-inline.collapsed > tbody > tr.parent > th.dtr-control::before {
    content: "–"; 
    background-color: #d33333; 
}


/* Badges e ícones */
.tarefas-table .badge {
    font-size: .75rem;
    padding: .35em .65em;
    font-weight: 600;
}
.btn-icon {
    color: var(--text-body-color, #4F5E7B);
    padding: .25rem .5rem;
    background: transparent;
    border: none;
}
.btn-icon:hover,
.btn-icon:focus {
    color: var(--primary-color, #5568FE);
    background: rgba(var(--primary-rgb, 85,104,254),.1);
}
.dropdown-menu {
    font-size: .9rem;
    box-shadow: 0 .5rem 1rem rgba(0,0,0,.15);
    z-index: 1056; 
}

/* Scroll da tabela DataTables */
div.dataTables_scrollBody {
    border: 1px solid var(--border-color, #dee2e6);
    border-top: none;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;
}

/* ===== Controles do DataTables: busca, filtros, botão ===== */
#tabelaTarefas_wrapper .dt-custom-header {
    display: flex;
    gap: 1rem;
    flex-wrap: wrap;
    padding: 1rem 0; 
    align-items: center;
}

div.dataTables_filter {
    flex: 1 1 auto;
    margin: 0;
    min-width: 150px;
} 
div.dataTables_filter input {
    height: 40px;
    padding: 0.375rem 0.75rem; 
    box-sizing: border-box;
    width: 100%;
    border-radius: var(--bs-border-radius, .375rem); 
    border: 1px solid var(--bs-border-color, #dee2e6); 
}
div.dataTables_filter input:focus {
    border-color: var(--primary-color, #5568FE); 
    box-shadow: 0 0 0 .25rem rgba(var(--primary-rgb, 85,104,254),.25); 
}


.dt-buttons-container {
    display: flex;
    align-items: center;
    gap: .5rem;
    flex-shrink: 0;
}

.dt-filter-select {
    width: auto !important;
    max-width: 180px;
    flex-shrink: 0;
    font-size: 0.9rem; 
    padding: 0.375rem 2.25rem 0.375rem 0.75rem; 
    height: 40px; 
    border-radius: var(--bs-border-radius, .375rem);
    border: 1px solid var(--bs-border-color, #dee2e6);
    background-color: var(--bs-body-bg, #fff);
    color: var(--bs-body-color, #212529);
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23343a40' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e"); 
    background-repeat: no-repeat;
    background-position: right 0.75rem center;
    background-size: 16px 12px;
    appearance: none; 
    -webkit-appearance: none;
    -moz-appearance: none;
}
.dt-filter-select:focus {
    border-color: var(--primary-color, #5568FE);
    box-shadow: 0 0 0 .25rem rgba(var(--primary-rgb, 85,104,254),.25);
}

.btn-add-task,
#abrirModalNovaTarefaDt { 
    height: 40px; 
}
.btn-add-task i,
#abrirModalNovaTarefaDt i {
    margin-right: 0.5rem;
}

/* ===== Responsividade Desktop (>=768px) ===== */
@media (min-width: 768px) {
    #tabelaTarefas_wrapper .dt-custom-header {
        flex-wrap: nowrap;
        padding: 1rem 0; 
    }

    #tabelaTarefas_wrapper .dt-custom-header > div.dataTables_filter {
        min-width: 200px;
    }

    #tabelaTarefas_wrapper .dt-custom-header > .dt-buttons-container {
        display: grid;
        grid-template-columns: repeat(2, minmax(120px, 180px)) auto;
        gap: .75rem;
    }
}

@media (min-width: 768px) {
    #tabelaTarefas_wrapper .dt-custom-header {
        flex-wrap: nowrap;
        padding: 1rem 0; 
        align-items: center; /* Fundamental para alinhar os filhos diretos verticalmente */
    }

    #tabelaTarefas_wrapper .dt-custom-header > div.dataTables_filter {
        min-width: 200px;
        margin-right: auto; /* Empurra os botões e filtros para a direita */
    }

    #tabelaTarefas_wrapper .dt-custom-header > .dt-buttons-container {
        display: flex; /* Alterado de grid para flex para simplificar o alinhamento vertical */
        align-items: center; /* Alinha verticalmente os filtros e o botão */
        gap: .75rem;
    }

    /* Garante que os selects e o botão tenham a mesma altura e alinhamento de texto */
    #tabelaTarefas_wrapper .dt-custom-header .dt-buttons-container > .dt-filter-select,
    #tabelaTarefas_wrapper .dt-custom-header .dt-buttons-container > #abrirModalNovaTarefaDt {
        height: 40px;
        display: inline-flex; /* Para que align-items funcione no botão */
        align-items: center;  /* Para centralizar o conteúdo do botão verticalmente */
        padding-top: 0;       /* Resetar padding se estiver afetando */
        padding-bottom: 0;    /* Resetar padding se estiver afetando */
        /* A classe .btn-add-task já define a altura de 40px para #abrirModalNovaTarefaDt, o que é bom */
    }

    /* Se os selects ainda estiverem desalinhados, pode ser necessário ajustar o padding deles especificamente */
    #tabelaTarefas_wrapper .dt-custom-header .dt-buttons-container > .dt-filter-select {
        padding-top: 0.375rem; /* Padding padrão do Bootstrap para form-select */
        padding-bottom: 0.375rem;
         /* A altura de 40px e o padding padrão do Bootstrap podem não ser perfeitamente compatíveis
            sem box-sizing: border-box (que o Bootstrap já aplica aos form-controls).
            Se ainda houver desalinhamento, experimente ajustar o padding-top/bottom dos selects
            ou do botão para igualá-los visualmente. */
    }
}
